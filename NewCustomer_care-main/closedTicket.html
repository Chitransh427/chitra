<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>closedTicket</title>
    <link href="css/bootstrap.css" rel="stylesheet" type="text/css" media="all" />
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/boxicons.css">
    <link rel="stylesheet" href="css/boxicons.min.css">
    <!--my fonts-->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600;700;800;900&display=swap"
    rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">

    <link rel="stylesheet" href="mystyle.css">
    <link rel="stylesheet" href="scrypts.js">
    <link rel="stylesheet" href="styles.css">

     <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="/js/url.js"></script>
    <script src="js/helpdesk_cc.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>

    <script>
        window.onload = function () {
            if (localStorage.getItem("token") == null) {
                window.location.href = window.location.protocol + "//" + window.location.host + "/customerCare_login.html";

            } else {
                getUserInfo();
            }
        }
    </script>

    <script>
        var selectedValue;

        $(document).ready(function () {
            $("#filter").change(function () {
                var selectedText = $(this).find("option:selected").text();
                var selectedValue = $(this).val();

                loadFilterType(selectedValue);



            });
        });


        var tableName = "#closedTickets tr";

        $(document).ready(function () {
            $('#datefilterfrom').change(function () {
                filterRows(tableName);
            });
            $('#datefilterto').change(function () {
                filterRows(tableName);
            });
            // $('#datefilterfrom').on("change", filterRows);
            // $('#datefilterto').on("change", filterRows);
        });

    </script>


</head>

<body>
    <nav class="top_navbar">
        <!-- <div class="logo">
            <img class="logo-in" align="left" src="..\images\logo-in.png" alt="Stores for Everyone" />
        </div> -->
        <div class="username">
            <span> Hello, <span id="profile_name"></span> !</span>

            <basic><a class="header_right" onclick="logout()"><i class='bx bxs-exit'></i></a></basic>
            <span class="text-on-hover" id="loghover" style="display: none;">Logout</span>
            <!-- <a class="header_right" href="profile.html"><i class='bx bxs-user-circle'></i></a> -->
        </div>
    </nav>
    <header>
        <div class="container-fluid">
            <div class="row justify-content-center">
                <div class="loginn">
                    <div id="orders">
                        <div class="row">
                            <h1><b>Welcome to Customer Care Services</b></h1>
                        </div>
                    </div>
                </div>
            </div>
    </header>
    <div class="dropdown">
        <!-- <button class="dropbtn">Filter&nbsp;&nbsp;&nbsp;<i class='bx bx-filter' ></i></button>
        <div class="dropdown-content">
            <select>
                <option value="0" selected="selected">Filter by Name</option>
                <option>Ascending Order</option>
                <option>Descending Order</option>
            </select>
            <select>
                <option value="0" selected="selected">Filter by Priority</option>
                <option>High</option>
                <option>Normal</option>
                <option>Low</option>
            </select>
            <select>
                <option value="0" selected="selected">Filter by Date</option>
                <option>Newest First</option>
                <option>Oldest First</option>
            </select>
            <select>
                <option value="0" selected="selected">Filter by Department</option>
                <option>Landing Page</option>
                <option>Store Admin</option>
                <option>Store Front</option>
            </select>
        </div>
    </div> -->

        <div class="row">
            <div class="col-md-4">
                <span class="dropbtn">Filter :</span>
                <select required name="Type" id="filter" class="form-select" required>
                    <option selected disabled hidden value="">Select</option>
                    <option value="filterByDate">Filter By Date</option>
                    <option value="filterByName">Filter By Name</option>
                    <option value="filterByTicketNumber">Filter By Ticket Number</option>
                    <option value="filterByPriority">Filter By Priority</option>
                    <option value="filterByDepartment">Filter By Department</option>
                </select>
            </div>
            <br>
            <div id="rowDate" style="display:none;">From
                <input type="date" id="datefilterfrom" data-date-split-input="true"> To <input type="date"
                    id="datefilterto" data-date-split-input="true">
            </div>
            <input type="text" id="name" onkeyup="myFunction(1,'name', 'closedTickets')"
                placeholder="Search for names.." title="Type in a name" style="display:none;">
            <input type="text" id="Department" onkeyup="myFunction(3,'Department', 'closedTickets')"
                placeholder="Search for Department" title="Type in a name" style="display:none;">
            <input type="text" id="Priority" onkeyup="myFunction(6,'Priority', 'closedTickets')"
                placeholder="Search for Priority" title="Type in a name" style="display:none;">

            <input type="text" id="ticketNumber" onkeyup="myFunction(0,'ticketNumber', 'closedTickets')"
                placeholder="Search for ticketNumber" title="Type in a name" style="display:none;">
            <br>
        </div>

        <!-- <nav class="navigation">
            <div class="first">
                <a href="index.html"><span class="all_tickets ">Dashboard </span></a>
                <a href="newTicket.html"><span class="new_tickets"> New Tickets </span></a>
                <a href="openTicket.html"><span class="open_tickets">Open Tickets </span></a>
                <a href="answeredTicket.html"><span class="answered_tickets">Answered Tickets </span></a>
                <a href="closedTicket.html" id="current"><span class="closed_tickets">Closed Tickets </span></a>
            </div>
        </nav> -->

        <div class="main-cards">

            <div class="card">
              <div class="card-inner">
                <p class="text-primary">New_Tickets</p>
                <span class="material-icons-outlined text-blue">inventory_2</span>
              </div>
              <span class="text-primary font-weight-bold">249</span>
            </div>
    
            <div class="card">
              <div class="card-inner">
                <p class="text-primary">Open_Tickets</p>
                <span class="material-icons-outlined text-orange">add_shopping_cart</span>
              </div>
              <span class="text-primary font-weight-bold">83</span>
            </div>
    
            <div class="card">
              <div class="card-inner">
                <p class="text-primary">Answered_Tickets</p>
                <span class="material-icons-outlined text-green">shopping_cart</span>
              </div>
              <span class="text-primary font-weight-bold">79</span>
            </div>
    
            <div class="card">
              <div class="card-inner">
                <p class="text-primary">Closed_Tickets</p>
                <span class="material-icons-outlined text-red">notification_important</span>
              </div>
              <span class="text-primary font-weight-bold">56</span>
            </div>
    
          </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- <nav class="navbar navbar-default navbar-inverse" role="navigation">
            <div class="container-fluid" id="navfluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navigationbar">
                        <i class='bx bx-menu'></i>
                    </button>
                </div>
                <div class="collapse navbar-collapse" id="navigationbar">
                    <ul class="nav navbar-nav">
                        <li class="nav-item">
                            <a href="index.html">Dashboard</a>
                        </li>
                        <li class="nav-item">
                            <a href="newTicket.html">New Tickets</a>
                        </li>
                        <li class="nav-item">
                            <a href="openTicket.html">Open Tickets</a>
                        </li>
                        <li class="nav-item">
                            <a href="answeredTicket.html">Answered Tickets</a>
                        </li>
                        <li class="nav-item">
                            <a href="closedTicket.html">Closed Tickets</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav> -->
        <center>
            <div class="sort">
                <button id="clsbtn1" onclick="getClosedTickets(),myFunction(1)">All Close Tickets</button>
                <button id="clsbtn2" class="mystyle1" onclick="getAgentClosedTicket(),myFunction(-1)">My
                    CloseTickets</button>
                <!-- <input class="filter" type="text" placeholder="Filter By Name" id="productname">
        <button class="filter">High Priority</button>
        <button class="filter">Normal Priority</button>
        <button class="filter">Low Priority</button> -->
            </div>
        </center>
        <div class="board">
            <table width="100%">
                <thead>
                    <tr class="rem1 odd" id="closeHead">
                        <th>Ticket Number </th>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Department</th>
                        <!-- <th>Type</th> -->
                        <th>Subject</th>
                        <th>Status</th>
                        <th>Priority</th>
                        <th>Ticket Date</th>
                        <th>Replied On</th>
                        <th>Closed Date</th>
                        <th>Assigned to</th>
                    </tr>
                <tbody id="closedTickets">

                </tbody>

                </thead>
            </table>
        </div>
        <footer>
            <div class="index-credits">
                <span class="left">&copy;2021 - A2ZSolutions LLC </span>
                <span class="right"><a href="#">Supported By Infinity Ventures (India) Pvt Ltd.</a></span>
            </div>
        </footer>
        <script>
            const icn = document.querySelector("basic");
            const text = document.querySelector("#loghover");

            icn.addEventListener("mouseenter", () => {
                text.style.display = "inline"
            })

            icn.addEventListener("mouseleave", () => {
                text.style.display = "none"
            })

        </script>
        <script>
            function getAgentClosedTicket() {
                var agent = localStorage.getItem("agentname");
                getClosedTicketsOfAgent(agent);

            }
            window.addEventListener('load', (event) => {

                getAgentClosedTicket();

            })
            function myFunction(str) {

                var element = document.getElementById("clsbtn1");
                var element1 = document.getElementById("clsbtn2");

                if (str == 1) {

                    element1.classList.remove("mystyle1");
                    element.classList.toggle("mystyle");

                } else {

                    element1.classList.toggle("mystyle1");
                    element.classList.remove("mystyle");

                }

            }
        </script>
</body>

</html>